<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@200&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/blogcontent.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="graphics3D.css">

    <script src="/js/prism.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <title>Graphics Engine 3D</title>
</head>

<body data-graphics3D-id="graphics3D2">
    <main>
        <div class="container-fluid ps-0">
            <div class="row">
                <div class="col-12 col-lg-2 sidebar pb-0 pe-0">
                    <!--load from sidebar.html-->
                </div>

                <div class="blog-content col-12 col-lg-10">
                    <div id="graphics3D-nav-top"></div>
                    <h1>Những khái niệm cơ bản</h1>
                    <h2>1. Hệ tọa độ <a href="https://vi.wikipedia.org/wiki/Hệ_tọa_độ_Descartes">Descartes</a></h2>
                    <img src="https://www.learnopengles.com/wordpress/wp-content/uploads/2012/10/left_right_hand.gif"
                        style="float:right;
                    max-width: 200px;" />
                    Không cần vòng vo gì nhiều, hệ tọa độ này chính là cái mà bạn đã học trong suốt 12 năm học, còn
                    nếu bạn muốn tìm hiểu thêm thì mình đã có link tới Wikipedia ở trên. Tuy nhiên, có
                    một điểm mà bạn cần lưu ý là, đối với Game và đa số các phần mềm đồ họa 3D, thì trục hướng lên là
                    trục y
                    chứ không phải trục z như trong toán học, và có chia ra làm 2 loại hệ tọa độ: Tay trái và tay phải,
                    mình thì quen hệ tọa độ tay trái hơn, lúc đó trục z sẽ hướng ra xa mình, trục x sẽ hướng sang phải,
                    và trục y sẽ hướng lên trên.
                    <h2 id="tamgiac">2. Tam giác</h2>
                    Chắc cái này bạn đã từng nghe qua, tất cả mọi thứ trong đồ họa 3D đều được làm từ nhiều hình tam
                    giác ghép lại với nhau,
                    và nó đúng là như vậy, đơn giản chỉ là vì tam giác là hình dạng cơ bản nhất mà bạn có thể tạo được
                    từ các điểm và đường.
                    Sau đây mình sẽ demo với một hình lập phương đơn giản, hình lập phương được tạo thành từ 6 mặt
                    phẳng, mỗi mặt phẳng đó
                    sẽ được tạo thành từ 2 tam giác, mình sẽ gọi 6 mặt phẳng đó là TOP, DOWN, FRONT, BACK, LEFT và
                    RIGHT.
                    Trước tiên đối với 4 đỉnh của mặt phẳng DOWN, FRONT và LEFT:
                    <div>
                        <img src="images/graphics3D2/down.png" style="max-width: 300px;" />
                        <img src="images/graphics3D2/front.png" style="max-width: 300px;" />
                        <img src="images/graphics3D2/left.png" style="max-width: 300px;" />
                    </div>
                    Đối với TOP, BACK và RIGHT thì nó chỉ là như DOWN, FRONT và LEFT nhưng với y, z, x = 1 thay vì 0.
                    Như vậy hình lập phương đầy đủ của chúng ta sẽ có 8 đỉnh như sau:
                    <img src="images/graphics3D2/cube1.png" style="display: block; max-width: 300px;" />
                    Sau đó ta bắt đầu cắt 6 mặt phẳng của hình lập phương thành các tam giác, mỗi mặt phẳng sẽ có 2 tam
                    giác:
                    <img src="images/graphics3D2/cube2.png" style="display: block; max-width: 300px;" />
                    Đối với mặt FRONT, ta có 2 tam giác là [(0,1,0), (1,1,0), (1,0,0)] và [(0,1,0), (1,0,0), (0,0,0)],
                    lưu ý là
                    thứ tự các đỉnh liệt kê trong tam giác phải thống nhất cùng chiều kim đồng hồ hay ngược chiều kim
                    đồng hồ,
                    điều này khá quan trọng, ta sẽ nói về điều này sau.
                    <img src="images/graphics3D2/frontTriangles.png" style="display: block; max-width: 300px;" />
                    Tương tự, đối với cả hình lập phương, ta sẽ có tất cả 12 tam giác như sau:
                    <pre><code class="language-javascript">[// FRONT
{{0,1,0}, {1,1,0}, {1,0,0}},
{{0,1,0}, {1,0,0}, {0,0,0}},
// RIGHT
{{1,1,0}, {1,1,1}, {1,0,1}},
{{1,1,0}, {1,0,1}, {1,0,0}},
// BACK
{{1,1,1}, {0,1,1}, {0,0,1}},
{{1,1,1}, {0,0,1}, {1,0,1}},
// LEFT
{{0,1,1}, {0,1,0}, {0,0,0}},
{{0,1,1}, {0,0,0}, {0,0,1}},
// TOP
{{0,1,1}, {1,1,1}, {1,1,0}},
{{0,1,1}, {1,1,0}, {0,1,0}},
// BOTTOM
{{1,0,1}, {0,0,1}, {0,0,0}},
{{1,0,1}, {0,0,0}, {1,0,0}}]</code></pre>

                    Tuy nhiên, ta muốn tâm của hình lập phương nằm ở gốc tọa độ (0, 0, 0), nên ta sẽ dịch chuyển tất cả
                    các đỉnh đi (-0.5, -0.5, -0.5), lúc đó ta sẽ có 8 đỉnh cuối cùng như sau (mình chỉ để 4 đỉnh ở mặt
                    FRONT để dễ nhìn):
                    <img src="images/graphics3D2/cube3.png" style="display: block; max-width: 500px;" />
                    Và 12 tam giác cuối cùng sẽ là:
                    <pre><code class="language-javascript">[// FRONT
{{-0.5,0.5,-0.5}, {0.5,0.5,-0.5}, {0.5,-0.5,-0.5}},
{{-0.5,0.5,-0.5}, {0.5,-0.5,-0.5}, {-0.5,-0.5,-0.5}},
// RIGHT
{{0.5,0.5,-0.5}, {0.5,0.5,0.5}, {0.5,-0.5,0.5}},
{{0.5,0.5,-0.5}, {0.5,-0.5,0.5}, {0.5,-0.5,-0.5}},
// BACK
{{0.5,0.5,0.5}, {-0.5,0.5,0.5}, {-0.5,-0.5,0.5}},
{{0.5,0.5,0.5}, {-0.5,-0.5,0.5}, {0.5,-0.5,0.5}},
// LEFT
{{-0.5,0.5,0.5}, {-0.5,0.5,-0.5}, {-0.5,-0.5,-0.5}},
{{-0.5,0.5,0.5}, {-0.5,-0.5,-0.5}, {-0.5,-0.5,0.5}},
// TOP
{{-0.5,0.5,0.5}, {0.5,0.5,0.5}, {0.5,0.5,-0.5}},
{{-0.5,0.5,0.5}, {0.5,0.5,-0.5}, {-0.5,0.5,-0.5}},
// BOTTOM
{{0.5,-0.5,0.5}, {-0.5,-0.5,0.5}, {-0.5,-0.5,-0.5}},
{{0.5,-0.5,0.5}, {-0.5,-0.5,-0.5}, {0.5,-0.5,-0.5}}]</code></pre>

                    <h2 id="manhinh">3. Màn hình</h2>
                    Đối với Game, thì người ta thường hay chuẩn hóa màn hình về giá trị từ -1 đến 1 theo cả 2 chiều x và
                    y,
                    cụ thể là điểm (-1, -1) sẽ nằm ở góc trái trên, điểm (1, 1) sẽ nằm ở góc phải dưới, và điểm (0, 0)
                    sẽ nằm ở
                    chính giữa.
                    <img src="images/graphics3D2/screen.png" style="display: block; max-width: 300px;" />
                    Hệ thống trên mặc định là màn hình nào cũng là hình vuông, nhưng ta biết là làm gì có màn hình nào
                    là hình vuông,
                    chỉ có hình chữ nhật thôi, nên trước tiên ta phải để ý tới tỉ lệ khung hình (aspect ratio) của màn
                    hình (tính bằng
                    cách lấy chiều rộng (w) chia cho chiều cao (h)). Như vậy, để thể hiện đúng điểm \((x, y, z)\) trên màn
                    hình,
                    trước tiên ta phải áp dụng tỉ lệ khung hình vào tọa độ x: \((x*\frac{h}{w}, y, z)\).
                    <h2>4. FOV</h2>
                    Chắc bạn cũng đã biết FOV (Field of view) là tầm nhìn của mắt người hay camera trong game,
                    fov càng lớn, càng nhìn được rộng.
                    Cụ thể hơn, trong game cũng như ngoài đời, mắt mình nhìn thế giới theo hình chóp cụt (frustum), 2
                    hình sau đại diện cho tầm nhìn của mình khi nhìn từ trên xuống và nhìn từ ngang qua:
                    <div>
                        <img src="images/graphics3D2/fov1.png" style="max-width: 400px;" />
                        <img src="images/graphics3D2/fov2.png" style="max-width: 400px;" />
                    </div>
                    Đặt FOV là theta (\(θ\)) (hình 2), chia frustum thành 2 tam giác vuông, thấy rằng FOV càng lớn thì cạnh đối (\(opposite\)) càng lớn, và
                    các vật càng gần tâm hơn khi hiển thị trên màn hình, mà như ta biết thì tâm màn hình chính là (0, 0), tức là
                    tọa độ (\(P\)) của vật trên màn hình sẽ càng nhỏ khi FOV càng lớn, suy ra tọa độ vật sẽ tỉ lệ nghịch với FOV và tỉ lệ nghịch
                    với cạnh đối: \(P \backsim \frac{1}{opposite}\). Đối với cạnh kề (\(adjacent\)) của 2 hình trên, đó chính là khoảng cách từ mắt đến khoảng
                    xa nhất mà ta có thể nhìn thấy được, có thể là bất kỳ hằng số nào, vì là hằng số nên ta cũng có thể suy ra rằng: \(P \backsim \frac{adjacent}{opposite}\).
                    Và như ta biết, \(tan\) bằng đối chia kề, tức là: \(P \backsim tan(\frac{θ}{2})\).<br />
                    Nếu bạn để ý, \(θ\) là góc ở hình thứ 2 chứ không phải hình thứ 1, vì ta đang sử dụng vertical FOV để tính toán, và hầu hết game nào cũng
                    sử dụng vertical FOV để tính toán cả (có mục đích hết, google để tìm hiểu thêm), điều này không hề được nhắc tới trong video của javidx9 btw.
                    
                    <div id="graphics3D-nav-bottom"></div>
                </div>

            </div>
        </div>
    </main>

    <footer></footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <script src="graphics3D.js"></script>
    <script src="/js/loadsidebar.js"></script>
</body>

</html>